# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [0.3.5] - 2026-01-31

### Removed
- Removed the temporary security note from `README.md` as `protobuf` has been updated.

## [0.3.4] - 2026-01-31

### Changed
- Refreshed `uv.lock` with dependency updates (including `huggingface-hub`, `orjson`, `protobuf`, `pyjwt`, and `tqdm`).

## [0.3.3] - 2026-01-28

### Changed
- Updated `README.md` security note to reference the current `protobuf` advisory and clarify local-use impact.
- Refined installation guidance to mention `uv` and clarified virtual environment options.
- Refreshed README wording around semantic search and MCP support.

## [0.3.2] - 2026-01-28

### Added
- Added autogenerated `requirements.txt` generated via `uv pip compile`.

### Changed
- Refreshed `uv.lock` with dependency updates (including `cryptography`, `mcp`, `python-multipart`, `rich`, `sentence-transformers`, `setuptools`, and `transformers`) and added `typer-slim`.

## [0.3.1] - 2026-01-02

### Changed
- Added explicit risk assessment to `README.md`.

### Maintenance Notes
- **Dependency Pin**: `urllib3` is pinned to `2.3.0` due to a version conflict in the `kubernetes` client (transitive dependency via `chromadb`).
- **Security Assessment**: Evaluated `urllib3` [GHSA-2xpw-w6gg-jr37](https://github.com/urllib3/urllib3/security/advisories/GHSA-2xpw-w6gg-jr37) and [GHSA-gm62-xv2j-4w53](https://github.com/urllib3/urllib3/security/advisories/GHSA-gm62-xv2j-4w53). Risk is considered negligible for local Zettelkasten use. Upgrade will follow once upstream releases a fix.

## [0.3.0] - 2026-01-02

### Changed
- Migrated dependency management to `pyproject.toml` (PEP 621), removing the redundant `requirements.in`.
- Updated workflow to generate `requirements.txt` directly from `pyproject.toml` using `pip-tools`.
- Upgraded all dependencies to their latest versions during the migration.

## [0.2.0] - 2026-01-02

### Added
- Rich-to-Markdown conversion for MCP server output to improve AI assistant readability.
- `zkss_markdown.py` helper utility to handle the conversion logic.
- Comprehensive tests for MCP output formatting in `tests/test_mcp_output.py`.

### Changed
- MCP `search_notes` tool now bolds filenames and content locations while stripping color tags.
- Updated `mcp_server.py` to use markdown conversion for both keyword and semantic search results.

## [0.1.0] - 2026-01-01

### Added
- Semantic Search using `sentence-transformers` and `chromadb`.
- MCP Server integration (`mcp_server.py`) to expose search tools to AI assistants.
- Configurable search result limit:
  - Added `-n` / `--limit` CLI argument.
  - Added `DEFAULT_RESULTS` setting in `settings.py` (default: 10).

### Fixed
- Fixed incremental indexing bug where files were re-indexed unnecessarily due to floating-point precision issues with `mtime`.

### Changed
- Updated project description in `pyproject.toml`.
- Comprehensive updates to `README.md` including setup instructions for Semantic Search and MCP.
- Updated `.cursor/mcp.json` configuration.

### Removed
- Redundant `ROADMAP.md` (consolidated into `development-plan.md`).

